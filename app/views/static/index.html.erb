<% if flash[:notice] %> 
  <div class='alert alert-success'>
    <button type="button" class="close" data-dismiss="alert">×</button>
    <%= flash[:notice] %>
  </div>
<% elsif flash[:error] %>
  <div class='alert alert-error'>
    <button type="button" class="close" data-dismiss="alert">×</button>
    <%= flash[:error] %>
  </div>
<% end %>

<div class="hero-unit">
  <h1>Gitbo</h1>
  <h3>Get paid to fix the most asked for Github issues</h3>

  <div class="row">
    <div class="span3">
      <div id="themeIcon1">
        <%= link_to image_tag("http://placehold.it/300x206"), issues_path %>
      </div>
      <div class="step_writeup">
        <h2 class="webfront">Explore Issues</h2>
        <p> See tech communities' most pressing issues </p>
      </div>
    </div>
    <div class="span3">
      <div id="themeIcon1">
        <%= link_to image_tag("http://placehold.it/300x206"), issues_path %>
      </div>
      <div class="step_writeup">
        <h2 class="webfront">Earn Money</h2>
        <p> Make money and help resolve issues </p>
      </div>
    </div>
    <div class="span3">
      <div id="themeIcon1">
        <%= link_to image_tag("http://placehold.it/300x206"), new_repo_path %>
      </div>
      <div class="step_writeup">
        <h2 class="webfront">Seek Help</h2>
        <p> Need help resolving technical issues but don't have time or resources? Add your issues here! </p>
      </div>
    </div>
  </div>
</div> <!-- end class hero unit -->

<!-- <div class='jumbotron'>
   <h1>Gitbo</h1>
   <p class='lead'>Get paid to fix the most asked for Github issues</p> 
</div> -->

<div class='row'>
  <div class='span6'>
    <h3>Trending repos</h3>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>Popularity</th>
          <th>Open Issues</th>
          <th></th>
        </tr>
        </thead>     
      <% @repos.sort_by(&:popularity).reverse[0..5].each do |repo| %>
        <tr>
          <td><%= link_to repo.owner_name, owner_repos_path(repo.owner_name) %> / <%= link_to repo.name, owner_repo_path(repo.owner_name, repo.name) %></td>
          <td><%= repo.popularity %></td>
          <td><%= repo.open_issues %></td>
        </tr>
      <% end %>
    </table>
  </div>

  <div class='span6'>
    <h3>Trending issues</h3>
    <table class="table table-hover">
        <thead>
          <tr>
            <th>Votes</th>
            <th>Issue</th>
            <th>Repo</th>
            <th>Popularity</th>
          </tr>
        </thead>

            <% @issues.sort_by(&:popularity).reverse[0..10].each do |issue| %>
            <tr>
              <td><%= issue.net_votes %></td>
              <td><%= link_to issue.title, owner_repo_gitnumber_path(issue.repo.owner_name, issue.repo.name, issue.git_number) %></td>
              <td><%= link_to issue.repo.name, owner_repo_path(issue.repo.owner_name, issue.repo.name) %></td>
              <td><%= issue.popularity %>
            </tr>
            <% end %>
    </table>
    <br />
  </div>
</div>

